name: CI with Cache

on: [push]  # Trigger on push events

jobs:
  build:
    runs-on: ubuntu-latest  # Running on the latest Ubuntu

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3  # Checkout your code

      - name: Cache dependencies
        uses: actions/cache@v4  # Use the actions/cache action to cache dependencies
        with:
          path: |
            ~/.npm  # For example, this caches npm dependencies (adjust based on your setup)
          key: ${{ runner.os }}-node-modules-${{ hashFiles('**/package-lock.json') }}  # Unique cache key based on package-lock.json
          restore-keys: |
            ${{ runner.os }}-node-modules-  # Fallback if cache key not found

      - name: Install dependencies
        run: npm install  # Install dependencies if not found in cache

      - name: prime-cache-6c09181  # Correct step name as per the assignment
        run: echo "Cache hit/miss result: ${{ steps.cache.outputs.cache-hit }}"  # This prints whether the cache was a hit or miss


#         #3. Explanation of Steps

# Checkout repository: This step pulls the latest version of your code.

# Cache dependencies: This caches the dependencies (in this example, npm modules) to speed up future runs.

# The path specifies where the dependencies are stored.

# The key is used to create a unique cache. In this case, it combines the OS and a hash of your package-lock.json file. If the file changes, the cache will be considered invalid and rebuilt.

# restore-keys is like a fallback in case the exact cache key isn’t found (e.g., if you change a dependency).

# Install dependencies: This installs the dependencies, but only if they aren’t found in the cache.

# Prime Cache: This step will output the result of whether the cache was a hit (i.e., found) or miss (i.e., not found).
